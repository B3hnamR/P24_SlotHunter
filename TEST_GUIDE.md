# 🧪 راهنمای تست P24_SlotHunter

## 📋 مراحل تست

### 1. بررسی Dependencies
```bash
python check_dependencies.py
```
این فایل وضعیت کتابخانه‌های نصب شده را بررسی می‌کند.

### 2. نصب Dependencies (در صورت نیاز)
```bash
pip install -r requirements.txt
```

### 3. تنظیم Environment Variables
فایل `.env` را ویرایش کنید و مقادیر زیر را تنظیم کنید:
```
TELEGRAM_BOT_TOKEN=your_bot_token_here
ADMIN_CHAT_ID=your_chat_id_here
```

### 4. تست تنظیمات
```bash
python test_config.py
```
این فایل تنظیمات، logger و دیتابیس را تست می‌کند.

### 5. تست API پذیرش۲۴
```bash
python test_api.py
```
این فایل اتصال به API پذیرش۲۴ و دریافت نوبت‌ها را تست می‌کند.

### 6. اجرای کامل پروژه
```bash
python src/main.py
```

## 🔧 نکات مهم

### ✅ چیزهایی که آماده است:
- ✅ کد کامل و حرفه‌ای
- ✅ ساختار پروژه مناسب
- ✅ مدل‌های دیتابیس
- ✅ ربات تلگرام
- ✅ API کلاینت
- ✅ سیستم لاگ
- ✅ پوشه‌های logs و data

### ⚠️ چیزهایی که نیاز به تنظیم دارند:
- ⚠️ نصب dependencies از requirements.txt
- ⚠️ تنظیم TELEGRAM_BOT_TOKEN در فایل .env
- ⚠️ تنظیم ADMIN_CHAT_ID در فایل .env

### 🚨 مشکلات احتمالی:

#### 1. خطای Import
اگر خطای import دریافت کردید:
```bash
# مطمئن شوید در پوشه اصلی پروژه هستید
cd P24_SlotHunter
python test_config.py
```

#### 2. خطای Dependencies
```bash
pip install requests aiohttp python-telegram-bot sqlalchemy pyyaml python-dotenv
```

#### 3. خطای Bot Token
- از @BotFather در تلگرام یک ربات جدید بسازید
- توکن را در فایل .env قرار دهید

#### 4. خطای Database
پوشه data باید وجود داشته باشد (خودکار ایجاد می‌شود)

## 📊 انتظارات تست

### تست موفق API:
```
🚀 شروع تست API پذیرش۲۴
👨‍⚕️ دکتر: دکتر مجتبی موسوی
🏥 مرکز: مطب دکتر سیدمحمدمجتبی موسوی
🔍 در حال بررسی نوبت‌های موجود...
✅ X نوبت موجود پیدا شد!
📋 نوبت‌های موجود:
  1. 2025/07/10 08:00 (نوبت #1)
  2. 2025/07/10 08:10 (نوبت #2)
  ...
🏁 تست به پایان رسید
```

### تست موفق Config:
```
🔧 تست تنظیمات پروژه...
✅ Config کلاس بارگذاری شد
📱 Bot Token: ✅ تنظیم شده
👤 Admin Chat ID: ✅ تنظیم شده
⏱️ Check Interval: 30 ثانیه
📅 Days Ahead: 7 روز
📝 Log Level: INFO
👨‍⚕️ تعداد دکترها: 1
📋 لیست دکترها:
  1. دکتر مجتبی موسوی - ✅ فعال
🎉 تنظیمات با موفقیت بارگذاری شد!
```

## 🎯 مرحله نهایی

اگر تمام تست‌ها موفق بودند:
```bash
python src/main.py
```

باید خروجی مشابه زیر را ببینید:
```
🚀 شروع P24_SlotHunter
✅ دیتابیس راه‌اندازی شد
✅ ربات تلگرام راه‌اندازی شد
👨‍⚕️ 1 دکتر در حال نظارت:
  ✅ دکتر مجتبی موسوی - آزمایشگاه و تصویربرداری
🔍 شروع دور جدید بررسی...
```

## 📞 پشتیبانی

در صورت بروز مشکل:
1. ابتدا فایل‌های تست را اجرا کنید
2. لاگ‌ها را در پوشه logs بررسی کنید
3. مطمئن شوید تمام dependencies نصب شده‌اند
4. Bot token و chat ID را بررسی کنید

**موفق باشید! 🚀**
# P24_SlotHunter โ Technical Project Structure Overview

ุงู ุณูุฏ ุฎูุงุตูโุง ุญุฑููโุง ู ุณุงุฎุชุงุฑุงูุชู ุงุฒ ูพุฑูฺู P24_SlotHunter ุฑุง ุจุฑุง ูุทุงูุนู ู ุจุฑุฑุณ ฺฉ ุจุฑูุงููโููุณ ูุชุฎุตุต ุงุฑุงุฆู ูโุฏูุฏ. ูุฏูุ ุขุดูุง ุณุฑุน ุจุง ูุนูุงุฑุ ููุด ูุฑ ูุงู/ูพูุดู ู ููุงุท ฺฉูุฏ ุชูุณุนู ุงุณุช.

---

## 1. ุณุงุฎุชุงุฑ ฺฉู ูพุฑูฺู

```
P24_SlotHunter/
โโโ src/                  # ฺฉุฏ ุงุตู ุจุฑูุงูู (ูุงฺููุงุฑ)
โ   โโโ api/              # ฺฉูุงูุช API ูพุฐุฑุดฒด ู ูุฏูโูุง ุฏุงุฏู
โ   โโโ database/         # ORM ู ูุฏุฑุช ุฏุชุงุจุณ
โ   โโโ telegram_bot/     # ููุทู ุฑุจุงุช ุชูฺฏุฑุงู (handlers, menu, admin, ...)
โ   โโโ utils/            # ุงุจุฒุงุฑูุง ฺฉูฺฉ (ุชูุธูุงุชุ ูุงฺฏ)
โ   โโโ main.py           # ููุทู ูุฑูุฏ ุงุตู ุจุฑูุงูู
โโโ config/               # ูุงูโูุง ุชูุธูุงุช (YAML)
โโโ data/                 # ุฏุชุงุจุณ ู ุฏุงุฏูโูุง ุฐุฎุฑูโุดุฏู
โโโ logs/                 # ูุงฺฏโูุง ุจุฑูุงูู
โโโ tests/                # ุชุณุชโูุง ูุงุญุฏ ู ฺฉูพุงุฑฺู
โโโ alembic/              # ูุฏุฑุช migration ุฏุชุงุจุณ
โโโ docs/                 # ูุณุชูุฏุงุช ู ููุดู ุฑุงู ุชูุณุนู
โโโ server_manager.sh     # ูุฏุฑุช ุณุฑูุณ (ูููฺฉุณ/ููฺฉุณ)
โโโ requirements.txt      # ูุงุจุณุชฺฏโูุง ูพุงุชูู
โโโ .env / .env.example   # ูุชุบุฑูุง ูุญุท
โโโ slothunter.service    # ูุงู systemd ุจุฑุง ุงุฌุฑุง ุจู ุนููุงู ุณุฑูุณ
```

---

## 2. ุดุฑุญ ูพูุดูโูุง ู ูุงูโูุง ฺฉูุฏ

### src/
- **main.py**: ููุทู ูุฑูุฏ async ุจุฑูุงููุ ุฑุงูโุงูุฏุงุฒ ฺฉุงููฺฏุ ุฏุชุงุจุณุ ุฑุจุงุช ุชูฺฏุฑุงู ู ุญููู ูุงูุชูุฑูฺฏ ููุจุชโูุง.
- **api/**
  - `paziresh_client.py`: ฺฉูุงูุช async ุจุฑุง API ูพุฐุฑุดฒด (ุฏุฑุงูุช ููุจุชุ ุฑุฒุฑูุ ูุบู).
  - `models.py`: ูุฏูโูุง ุฏุงุฏูโุง Doctor, Appointment, APIResponse (dataclass).
- **database/**
  - `models.py`: ORM SQLAlchemy ุจุฑุง User, Doctor, Subscription, AppointmentLog.
  - `database.py`: ูุฏุฑุช AsyncSessionุ context manager ู ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ.
- **telegram_bot/**
  - `bot.py`: ฺฉูุงุณ ุงุตู ุฑุจุงุช ุชูฺฏุฑุงู (python-telegram-bot v20+)ุ ูุฏุฑุช lifecycle ู ุงุฑุณุงู ูพุงู.
  - `handlers.py`: ุฏุณุชูุฑุงุช ุงุตู ฺฉุงุฑุจุฑ (start, help, subscribe, ...).
  - `menu_handlers.py`: ููููุง ุชุนุงูู ู ููุดโูุญูุฑ (Reply/Inline keyboards).
  - `callback_handlers.py`: ูุฏุฑุช ฺฉุงูู callbackูุง ุฏฺฉููโูุง inline (ุงุดุชุฑุงฺฉุ ุขูุงุฑุ ูุฏุฑุช).
  - `admin_handlers.py`: ุนููุงุช ูุฏุฑุช (ุงูุฒูุฏู ุฏฺฉุชุฑุ ุชูุธูุงุช ุงุฏูู).
  - `admin_menu_handlers_fixed.py`: ููููุง ูพุดุฑูุชู ุงุฏูู ุจุง ฺฉูุชุฑู ุฏุณุชุฑุณ ููุดโูุญูุฑ.
  - `messages.py`: ูุงูุจโุจูุฏ ูพุงูโูุง ู ูุชูู ุฑุจุงุช.
  - `user_roles.py`: ุณุณุชู ููุดโูุง ฺฉุงุฑุจุฑ (User, Moderator, Admin, Super Admin).
  - `access_control.py`: ฺฉูุชุฑู ุฏุณุชุฑุณ ู ูุฌูุฒูุง.
  - `decorators.py`: ุฏฺฉูุฑุงุชูุฑูุง ฺฉูฺฉ ุจุฑุง ฺฉูุชุฑู ุฏุณุชุฑุณ.
  - `utils.py`: ุงุจุฒุงุฑูุง ฺฉูฺฉ ุฑุจุงุช ุชูฺฏุฑุงู.
- **utils/**
  - `config.py`: ูุฏุฑุช ุชูุธูุงุช ูพุฑูฺู (YAML + env + pydantic).
  - `logger.py`: ุณุณุชู ูุงฺฏ (console/file, rotating) ู ุงุทูุงุนโุฑุณุงู ุฎุทุง ุจู ุงุฏูู ุชูฺฏุฑุงู.

### config/
- **config.yaml**: ุชูุธูุงุช ุงุตู ูพุฑูฺู (ุชูฺฉู ุฑุจุงุชุ ฺุช ุงุฏููุ ูพุงุฑุงูุชุฑูุง ูุงูุชูุฑูฺฏุ ูุงฺฏุ ูุณุช ุฏฺฉุชุฑูุง).

### data/
- **slothunter.db**: ุฏุชุงุจุณ SQLite ูพุฑูฺู (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ SQLite).

### logs/
- **slothunter.log**: ูุงฺฏ ุงุตู ุจุฑูุงูู (ูุงุจู ฺุฑุฎุด ู ูุฏุฑุช).

### alembic/
- **env.py**: ุชูุธูุงุช migration ุฏุชุงุจุณ (ุฎูุงูุฏู ูุฏูโูุง ู ุขุฏุฑุณ ุฏุชุงุจุณ ุงุฒ config/env).
- **README.md**: ุฑุงูููุง migration ุจุง Alembic.

### tests/
- **test_config.py**: ุชุณุช ุจุงุฑฺฏุฐุงุฑ ุชูุธูุงุช ู ููุงุฏุฑ ูพุดโูุฑุถ.
- **test_doctor_model.py**: ุชุณุช ุงุนุชุจุงุฑุณูุฌ ูุฏู Doctor.
- **test_paziresh_api.py**: ุชุณุช ุงููู ฺฉูุงูุช API ูพุฐุฑุดฒด (async).

### ุงุณฺฉุฑูพุชโูุง ูุฏุฑุช
- **server_manager.sh**: ูุฏุฑุช ุณุฑูุณ ู setup ูพุดุฑูุชู ุจุฑุง ูููฺฉุณ (bash, systemd, health checkุ ูพูู ุชุนุงูู).
- **slothunter.service**: ูุงู systemd ุจุฑุง ุงุฌุฑุง ูพุฑูฺู ุจู ุนููุงู ุณุฑูุณ ุฏุงุฆู.

### ุณุงุฑ ูุงูโูุง
- **requirements.txt**: ูุณุช ฺฉุงูู ูุงุจุณุชฺฏโูุง ูพุงุชูู (async, telegram, db, test, dev).
- **.env / .env.example**: ูุชุบุฑูุง ูุญุท (ุชูฺฉู ุฑุจุงุชุ ฺุช ุงุฏููุ ุชูุธูุงุช ุงุฎุชุงุฑ).
- **CHANGES_SUMMARY.md**: ุฎูุงุตู ุชุบุฑุงุช ู ุจูุจูุฏูุง ุงุฎุฑ ูพุฑูฺู.

---

## 3. ูฺฉุงุช ูุนูุงุฑ ู ุชูุณุนู
- **ูุนูุงุฑ ูุงฺููุงุฑ ู async**: ุฌุฏุงุณุงุฒ ฺฉุงูู ูุงูโูุง (API, DB, Bot, Utils) ู ุงุณุชูุงุฏู ุงุฒ async/await ุจุฑุง performance ุจุงูุง.
- **ูพุดุชุจุงู ุงุฒ migration ุฏุชุงุจุณ**: ุจุง Alembic ู ูุฏูโูุง SQLAlchemy.
- **ุณุณุชู ูุงฺฏ ุญุฑููโุง**: ูพุดุชุจุงู ุงุฒ rotating logุ ุงุฑุณุงู ุฎุทุง ุจู ุชูฺฏุฑุงู ุงุฏูู.
- **ูุฏุฑุช ุชูุธูุงุช ููุนุทู**: ุจุงุฑฺฏุฐุงุฑ ุงุฒ YAML ู env ุจุง ุงุนุชุจุงุฑุณูุฌ pydantic.
- **ุชุณุชโูพุฐุฑ ุจุงูุง**: ุชุณุชโูุง ูุงุญุฏ ุจุฑุง ฺฉุงููฺฏุ ูุฏูโูุง ู API.
- **ุณุณุชู ููุดโูุง ฺฉุงุฑุจุฑ**: ฺฉูุชุฑู ุฏุณุชุฑุณ ฺูุฏุณุทุญู (User, Moderator, Admin, Super Admin).
- **ูุฏุฑุช ุณุฑูุณ ฺฉูพุงุฑฺู**: ุงุณฺฉุฑูพุช bash ูพุดุฑูุชู ุจุง ูพูู ุชุนุงูู ู health check.
- **ูุณุชูุฏุณุงุฒ ฺฉุงูู**: ูพูุดู docs ู roadmap ูู/ุชุฌุงุฑ ุจุฑุง ุชูุณุนู ุขูุฏู.

---

## 4. ูฺฺฏโูุง ุฌุฏุฏ ู ุจูุจูุฏูุง

### ๐ **ูฺฺฏโูุง ุงุถุงูู ุดุฏู:**
- **ุณุณุชู ููุดโูุง ฺฉุงุฑุจุฑ**: ูุฏุฑุช ุฏุณุชุฑุณ ฺู๏ฟฝ๏ฟฝุณุทุญู ุจุง ฺฉูุชุฑู ุฏูู
- **ููููุง ูพุดุฑูุชู ุงุฏูู**: ูพููโูุง ูุฏุฑุช ฺฉุงูู ุจุง ฺฉูุชุฑู ุฏุณุชุฑุณ
- **ูุฏุฑุช ุณุฑูุณ ูพุดุฑูุชู**: `server_manager.sh` ุจุง ูพูู ุชุนุงูู ู ุนููุงุช ุฎูุฏฺฉุงุฑ
- **ฺฉูุชุฑู ุฏุณุชุฑุณ**: ุฏฺฉูุฑุงุชูุฑูุง ู ุณุณุชู ูุฌูุฒูุง ูพุดุฑูุชู
- **ุจูููโุณุงุฒ ฺฉุฏ**: ุญุฐู ูุงูโูุง ุชฺฉุฑุงุฑ ู ุบุฑุถุฑูุฑ

### ๐ง **ุจูุจูุฏูุง ูู:**
- **ุชูุฒุณุงุฒ ฺฉุฏุจุณ**: ุญุฐู ูุงูโูุง deprecated ู ุชฺฉุฑุงุฑ
- **ุจูููโุณุงุฒ imports**: ุงุตูุงุญ ูุฑุงุฌุน ู ูุงุจุณุชฺฏโูุง
- **ุณุงุฎุชุงุฑ ููุธู**: ุณุงุฒูุงูุฏู ุจูุชุฑ ูุงูโูุง ู ูพูุดูโูุง
- **ูุณุชูุฏุณุงุฒ ุจุฑูุฒ**: ุจูโุฑูุฒุฑุณุงู ูุณุชูุฏุงุช ูุทุงุจู ุชุบุฑุงุช

---

## 5. ุชูุตูโูุง ูุทุงูุนู ู ุชูุณุนู
- ุจุฑุง ุชูุณุนู feature ุฌุฏุฏุ ุงุจุชุฏุง ุณุงุฎุชุงุฑ src/ ู ูุฏูโูุง ุฏุงุฏู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
- ุจุฑุง ุงูุฒูุฏู ุฏฺฉุชุฑ ุฌุฏุฏ ุง ุชุบุฑ ุชูุธูุงุชุ ุงุฒ ุฑุจุงุช ุชูฺฏุฑุงู ุง ูุงู config.yaml ุงุณุชูุงุฏู ฺฉูุฏ.
- ุจุฑุง ุงุณุชูุฑุงุฑ productionุ ุงุฒ server_manager.sh ู ูุงู slothunter.service ุจูุฑู ุจุจุฑุฏ.
- ุจุฑุง migration ุฏุชุงุจุณุ ุงุฒ alembic ู ุฑุงูููุง ุขู ุงุณุชูุงุฏู ฺฉูุฏ.
- ุจุฑุง ุชุณุช ู ุชูุณุนูุ ุชุณุชโูุง ูพูุดู tests/ ุฑุง ุงุฌุฑุง ู ุชูุณุนู ุฏูุฏ.
- ุจุฑุง ูุฏุฑุช ููุดโูุง ฺฉุงุฑุจุฑุ ุงุฒ ุณุณุชู user_roles ุงุณุชูุงุฏู ฺฉูุฏ.

---

## 6. ุฏุณุชูุฑุงุช ุงุฌุฑุง ู ูุฏุฑุช

### ๐ **ุฑุงูโุงูุฏุงุฒ ุณุฑุน:**
```bash
# ุฑุงูโุงูุฏุงุฒ ฺฉุงูู
./server_manager.sh setup

# ุงุฌุฑุง ุณุฑูุณ
./server_manager.sh start

# ูพูู ูุฏุฑุช ุชุนุงูู
./server_manager.sh
```

### ๐ง **ุฏุณุชูุฑุงุช ูุฏุฑุช:**
```bash
./server_manager.sh start     # ุดุฑูุน ุณุฑูุณ
./server_manager.sh stop      # ุชููู ุณุฑูุณ
./server_manager.sh restart   # ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
./server_manager.sh status    # ูุถุนุช ุณุฑูุณ
./server_manager.sh logs      # ูุดุงูุฏู ูุงฺฏโูุง
./server_manager.sh stats     # ุขูุงุฑ ุณุณุชู
./server_manager.sh test      # ุชุณุช ุณุณุชู
```

### ๐ **ุงุฌุฑุง ูุณุชูู:**
```bash
# ุงุฌุฑุง ูุณุชูู ูพุฑูฺู
python src/main.py
```

---

**ุงู ูพุฑูฺู ุขูุงุฏู ุชูุณุนู enterprise ู ููุงุณโูพุฐุฑ ุงุณุช ู ุจุง ุฑุนุงุช best practiceูุง ูุนูุงุฑ ู ุชูุณุนู Python ุทุฑุงุญ ุดุฏู ุงุณุช. ูพุณ ุงุฒ ุชูุฒุณุงุฒ ู ุจูููโุณุงุฒุ ูพุฑูฺู ุจุฑุง ุงุณุชูุฑุงุฑ ุฏุฑ ูุญุท production ูููฺฉุณ ุขูุงุฏู ูโุจุงุดุฏ.**
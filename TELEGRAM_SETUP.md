# 🤖 راهنمای تنظیم ربات تلگرام

## 📋 مراحل ایجاد ربات تلگرام

### 1. ایجاد ربات جدید

1. در تلگرام به [@BotFather](https://t.me/BotFather) پیام دهید
2. دستور `/newbot` را ارسال کنید
3. نام ربات را وارد کنید (مثل: `P24 Slot Hunter`)
4. username ربات را وارد کنید (باید به `bot` ختم شود، مثل: `p24slothunter_bot`)

### 2. دریافت توکن

بعد از ایجاد ربات، BotFather توکنی مشابه زیر می‌دهد:
```
123456789:ABCdefGHIjklMNOpqrsTUVwxyz
```

### 3. دریافت Chat ID

برای دریافت Chat ID خود:

#### روش 1: استفاده از ربات
1. به [@userinfobot](https://t.me/userinfobot) پیام دهید
2. Chat ID شما نمایش داده می‌شود

#### روش 2: استفاده از API
1. ابتدا به ربات خودتان پیام دهید
2. سپس این لینک را در مرورگر باز کنید:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
```
3. در پاسخ، `chat.id` را پیدا کنید

### 4. تنظیم فایل .env

فایل `.env` را ویرایش کنید:

```bash
nano .env
```

محتوای فایل:
```
# توکن ربات تلگرام
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# شناسه چت ادمین
ADMIN_CHAT_ID=123456789

# تنظیمات اختیاری
CHECK_INTERVAL=30
LOG_LEVEL=INFO
```

### 5. تست ربات

```bash
# تست تنظیمات
python test_config.py

# اجرای کامل با ربات
python run.py
```

## 🚀 اجرای بدون ربات تلگرام

اگر فعلاً نمی‌خواهید ربات تلگرام تنظیم کنید:

```bash
# اجرای ساده بدون تلگرام
python run_without_telegram.py
```

این نسخه:
- ✅ نوبت‌ها را پیدا می‌کند
- ✅ در لاگ نمایش می‌دهد
- ❌ پیام تلگرام ارسال نمی‌کند

## 🔧 تنظیمات ربات

بعد از راه‌اندازی، دستورات ربات:

- `/start` - شروع ربات
- `/doctors` - مشاهده دکترها
- `/subscribe` - اشتراک در دکتر
- `/unsubscribe` - لغو اشتراک
- `/status` - وضعیت اشتراک‌ها
- `/help` - راهنما

## 📱 نمونه پیام اطلاع‌رسانی

```
🎯 نوبت خالی پیدا شد!

👨‍⚕️ دکتر: دکتر مجتبی موسوی
🏥 مرکز: مطب دکتر سیدمحمدمجتبی موسوی

📅 نوبت‌های موجود:
🗓️ 2025/07/12:
   ⏰ 07:30 (نوبت #1)
   ⏰ 07:40 (نوبت #2)
   ... و 106 نوبت دیگر

🔗 لینک رزرو:
https://www.paziresh24.com/dr/دکتر-سیدمحمدمجتبی-موسوی-0/

⚡ سریع عمل کنید!
```

## 🛡️ امنیت

- ⚠️ هرگز توکن ربات را در git commit نکنید
- ⚠️ فایل `.env` را در `.gitignore` قرار دهید
- ⚠️ توکن را فقط در سرور اصلی قرار دهید

## 🔄 به‌روزرسانی توکن

اگر توکن لو رفت:
1. به @BotFather پیام دهید
2. دستور `/token` را ارسال کنید
3. ربات خود را انتخاب کنید
4. توکن جدید را در `.env` قرار دهید